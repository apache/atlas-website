<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8 from src/site/twiki/Import-API-Options.twiki at 2019-06-27
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20190627" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Apache Atlas &#x2013; Import API Options</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarEnabled">
    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
            <div class="container" style="width: 68%;"><div class="nav-collapse">
            <ul class="nav">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Atlas <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="index.html" title="About">About</a></li>
            <li><a href="https://cwiki.apache.org/confluence/display/ATLAS" title="Wiki">Wiki</a></li>
            <li><a href="https://cwiki.apache.org/confluence/display/ATLAS" title="News">News</a></li>
            <li><a href="https://gitbox.apache.org/repos/asf/atlas.git" title="Git">Git</a></li>
            <li><a href="https://issues.apache.org/jira/browse/ATLAS" title="Jira">Jira</a></li>
            <li><a href="https://cwiki.apache.org/confluence/display/ATLAS/PoweredBy" title="Powered by">Powered by</a></li>
            <li><a href="http://blogs.apache.org/atlas/" title="Blog">Blog</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Information <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="project-info.html" title="Summary">Summary</a></li>
            <li><a href="mail-lists.html" title="Mailing Lists">Mailing Lists</a></li>
            <li><a href="http://webchat.freenode.net?channels=apacheatlas&uio=d4" title="IRC">IRC</a></li>
            <li><a href="team-list.html" title="Team">Team</a></li>
            <li><a href="issue-tracking.html" title="Issue Tracking">Issue Tracking</a></li>
            <li><a href="source-repository.html" title="Source Repository">Source Repository</a></li>
            <li><a href="license.html" title="License">License</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Download <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../Downloads.html" target="_blank" title="Source Downloads">Source Downloads</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../index.html" title="latest">latest</a></li>
            <li><a href="../0.8.4/index.html" title="0.8.4">0.8.4</a></li>
            <li><a href="../0.8.3/index.html" title="0.8.3">0.8.3</a></li>
            <li><a href="../0.8.2/index.html" title="0.8.2">0.8.2</a></li>
            <li><a href="../0.8.1/index.html" title="0.8.1">0.8.1</a></li>
            <li><a href="../0.8.0-incubating/index.html" title="0.8-incubating">0.8-incubating</a></li>
            <li><a href="../0.7.1-incubating/index.html" title="0.7.1-incubating">0.7.1-incubating</a></li>
            <li><a href="../0.7.0-incubating/index.html" title="0.7-incubating">0.7-incubating</a></li>
            <li><a href="../0.6.0-incubating/index.html" title="0.6-incubating">0.6-incubating</a></li>
            <li><a href="../0.5.0-incubating/index.html" title="0.5-incubating">0.5-incubating</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">ASF <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="http://www.apache.org/foundation/how-it-works.html" title="How Apache Works">How Apache Works</a></li>
            <li><a href="http://www.apache.org/foundation/" title="Foundation">Foundation</a></li>
            <li><a href="http://www.apache.org/foundation/sponsorship.html" title="Sponsoring Apache">Sponsoring Apache</a></li>
            <li><a href="http://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></li>
        </ul>
      </li>
            </ul>
<form id="search-form" action="https://www.google.com/search" method="get"  class="navbar-search pull-right" >
  <input value="http://atlas.apache.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript">asyncJs( 'https://cse.google.com/brand?form=search-form' )</script>
    <iframe src="https://www.facebook.com/plugins/like.php?href=http://atlas.apache.org/atlas-docs&send=false&layout=button_count&show-faces=false&action=like&colorscheme=dark"
        scrolling="no" frameborder="0"
        style="border:none; width:100px; height:20px; margin-top: 10px;"  class="pull-right" ></iframe>
    <script type="text/javascript">asyncJs( 'https://apis.google.com/js/plusone.js' )</script>
    <ul class="nav pull-right"><li style="margin-top: 10px;">
    <div class="g-plusone" data-href="http://atlas.apache.org/atlas-docs" data-size="medium"  width="60px" align="right" ></div>
    </li></ul>
            </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div id="banner">
        <div class="pull-left"><a href=".." id="bannerLeft"><img src="images/atlas-logo.png"  alt="Apache Atlas" width="200px" height="45px"/></a></div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
      <li class=""><a href="http://www.apache.org" class="externalLink" title="Apache">Apache</a><span class="divider">/</span></li>
      <li class=""><a href="index.html" title="Atlas">Atlas</a><span class="divider">/</span></li>
    <li class="active ">Import API Options</li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2019-06-27</li>
          <li id="projectVersion" class="pull-right">Version: 0.8.4</li>
        </ul>
      </div>
        <div id="bodyColumn" >
<div class="section">
<h2><a name="Import_API_Options"></a>Import API Options</h2>
<p>Import API options are specified as <i>options</i> JSON. Since the API accepts multi-part form data, it is possible to sepecify multipls input streams within the CURL call.</p></div>
<div class="section">
<h4><a name="Examples_Using_CURL_Calls"></a>Examples Using CURL Calls</h4>
<div class="source"><pre class="prettyprint">
curl -g -X POST -u adminuser:password -H &quot;Content-Type: multipart/form-data&quot;
            -H &quot;Cache-Control: no-cache&quot;
            -F request=@importOptions.json
            -F data=@quickStartDB.zip
            &quot;http://localhost:21000/api/atlas/admin/import&quot;

</pre></div>
<p>To use the defaults, set the contents of <i>importOptions.json</i> to:</p>
<div class="source"><pre class="prettyprint">
{
  &quot;options&quot;: {
  }
}

</pre></div></div>
<div class="section">
<h4><a name="Options"></a>Options</h4>
<p>Following options are supported for Import process:</p>
<p></p>
<ul>
<li>Specify transforms during import operation.</li>
<li>Resume import by specifying starting entity guid.</li>
<li>Optionally import type definition.</li></ul></div>
<div class="section">
<h5><a name="Transforms"></a>Transforms</h5>
<p>During the import process, the attribute value of the incoming entity can be changed.</p>
<p>This is possible by specifying entity type and at attribute to be modified and then the manner in which it needs to be modified.</p>
<p>Right now these are the transforms that can be applied:</p>
<ul>
<li><i>lowercase</i> Converts the attribute value to lower case.</li>
<li><i>replace</i> This performs a string find and replace operation. It takes two parameters, the first is the string to search for and the next one is the string to replace it with.</li></ul>
<p>Example:</p>
<p>The example below applies couple of transforms to the the <i>qualifiedName</i> attribute of hive_table. It converts the value to lower case, then searches for 'cl1', if found, replaces it with 'cl2'.</p>
<p>To use the option, set the contents of <i>importOptions.json</i> to:</p>
<div class="source"><pre class="prettyprint">
{
  &quot;options&quot;: {
    &quot;transforms&quot;: &quot;{ \&quot;hive_table\&quot;: { \&quot;qualifiedName\&quot;: [ \&quot;replace:@cl1:@cl2\&quot; ] }, \&quot;hive_db\&quot;: { \&quot;qualifiedName\&quot;: [ \&quot;replace:@cl1:@cl2\&quot; ] } }&quot;
  }
}

</pre></div>
<p>Please refer to <a class="externalLink" href="https://issues.apache.org/jira/browse/ATLAS-1825">ATLAS-1825</a> for details scenarios when this option could be used.</p></div>
<div class="section">
<h5><a name="Start_Guid_or_Start_Index"></a>Start Guid or Start Index</h5>
<p>When an import operation is in progress and the server goes down, it would be possible to resume import from the last successfully imported entity. This would allow the import to resume from where it left off.</p>
<p>Server-side logging is improved to display the detail of the last successfully imported entity, this includes the index within the import list and the entity's guid. Either can be used specify the point to resume import.</p>
<p>To use the option, set the contents of <i>importOptions.json</i> to:</p>
<div class="source"><pre class="prettyprint">
{

  &quot;options&quot;: {
    &quot;startGuid&quot;: &quot;bd97c78e-3fa5-4f9c-9f48-3683ca3d1fb1&quot;
  }
}

</pre></div>
<p>To use <i>startPosition</i>, use the following in the <i>importOptions.json</i>:</p>
<div class="source"><pre class="prettyprint">
{

  &quot;options&quot;: {
    &quot;startPosition&quot;: &quot;332&quot;
  }
}

</pre></div>
<p>Steps to use the behavior:</p>
<ul>
<li>Start an import (using the CURL) that is fairly long, say about 1000+ entities.</li>
<li>While the import is in progress, stop atlas server (using atlas_stop.py).</li>
<li>From the log file located at <i>/var/log/atlas/application.log</i> get the last successfully imported entity GUID or index position.</li>
<li>Update the <i>importOptions.json</i> with the guid.</li>
<li>Restart import.</li></ul></div>
<div class="section">
<h5><a name="Optional_Importing_Type_Definition"></a>Optional Importing Type Definition</h5>
<p>The output of Export has <i>atlas-typedef.json</i> that contains the type definitions for the entities exported.</p>
<p>By default (that is if no options is specified), the type definitions are imported and applied to the system being imported to. The entity import is performed after this.</p>
<p>In some cases, you would not want to modify the type definitions. Import may be better off failing than the types be modified.</p>
<p>This option allows for optionally importing of type definition. The option is set to <i>true</i> by default, which means that type definition is imported. With this option set to <i>false</i>, type definitions preseneraent in the source will not be imported. In case of mismatch between the entities being imported the types present in the system where the import is being performed, the operation will fail.</p>
<p>Table below enumerates the conditions that get addressed as part of type definition import:</p>
<p></p>
<table border="0" class="table table-striped">
<tr class="a">
<th>Condition</th>
<th>Action</th></tr>
<tr class="b">
<td>Incoming type does not exist in target system</td>
<td>Type is created.</td></tr>
<tr class="a">
<td>Type to be imported and type in target system are same</td>
<td>No change</td></tr>
<tr class="b">
<td>Type to be imported and type in target system differ by some attributes</td>
<td>Target system type is updated to the attributes present in the source. It is possible that the target system will have attributes in addition to the one present in the source. In that case, the target system's type attributes will be an union of the attributes. Attributes in target system will not be deleted to match the source. If the type of the attribute differ, import process will be aborted and exception logged.</td></tr></table>To use the option, set the contents of <i>importOptions.json</i> to:
<div class="source"><pre class="prettyprint">
{

  &quot;options&quot;: {
    &quot;updateTypeDefinition&quot;: true
  }
}

</pre></div></div>
<div class="section">
<h5><a name="Specifying_File_to_be_Imported_From_Server_Location"></a>Specifying File to be Imported From Server Location</h5>
<p>In scenario where the file to be imported is present at a location on the server, the <i>importfile</i> API can be used. It behaves like the Import API.</p>
<p>To use the option, set the contents of <i>importOptions.json</i> to:</p>
<div class="source"><pre class="prettyprint">
{

  &quot;options&quot;: {
    &quot;fileName&quot;: &quot;/root/fileToBeImported.zip&quot;
  }
}

</pre></div>
<p><i>CURL</i></p>
<div class="source"><pre class="prettyprint">
curl -g -X POST -u adminuser:password -H &quot;Content-Type: application/json&quot;
            -H &quot;Cache-Control: no-cache&quot;
            -d r@importOptions.json
            &quot;http://localhost:21000/api/atlas/admin/importfile&quot;

</pre></div></div>
        </div>
    </div>
    <hr/>
    <footer>
      <div class="container">
        <div class="row">
Copyright Â© 2018 The Apache Software Foundation, Licensed under the Apache License, Version 2.0.
        </div>
        <p id="poweredBy" class="pull-right"><a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
</p>
      </div>
    </footer>
  </body>
</html>
