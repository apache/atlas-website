<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-12-30
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20151230" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Apache Atlas &#x2013; Building & Installing Apache Atlas</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<script type="text/javascript">$( document ).ready( function() { $( '.carousel' ).carousel( { interval: 3500 } ) } );</script>
          
            </head>
        <body class="topBarEnabled">
          
                        
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                                  <div class="container" style="width: 68%;"><div class="nav-collapse">
            
                
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Atlas <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="index.html"  title="About">About</a>
</li>
                  
                      <li>      <a href="https://cwiki.apache.org/confluence/display/ATLAS"  title="Wiki">Wiki</a>
</li>
                  
                      <li>      <a href="https://cwiki.apache.org/confluence/display/ATLAS"  title="News">News</a>
</li>
                  
                      <li>      <a href="https://git-wip-us.apache.org/repos/asf/incubator-atlas.git"  title="Git">Git</a>
</li>
                  
                      <li>      <a href="https://issues.apache.org/jira/browse/ATLAS"  title="Jira">Jira</a>
</li>
                  
                      <li>      <a href="https://cwiki.apache.org/confluence/display/ATLAS/PoweredBy"  title="Powered by">Powered by</a>
</li>
                  
                      <li>      <a href="http://blogs.apache.org/atlas/"  title="Blog">Blog</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Information <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="project-info.html"  title="Summary">Summary</a>
</li>
                  
                      <li>      <a href="mail-lists.html"  title="Mailing Lists">Mailing Lists</a>
</li>
                  
                      <li>      <a href="http://webchat.freenode.net?channels=apacheatlas&uio=d4"  title="IRC">IRC</a>
</li>
                  
                      <li>      <a href="team-list.html"  title="Team">Team</a>
</li>
                  
                      <li>      <a href="issue-tracking.html"  title="Issue Tracking">Issue Tracking</a>
</li>
                  
                      <li>      <a href="source-repository.html"  title="Source Repository">Source Repository</a>
</li>
                  
                      <li>      <a href="license.html"  title="License">License</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Releases <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="http://www.apache.org/dyn/closer.cgi/incubator/atlas/0.5.0-incubating/"  title="0.5-incubating">0.5-incubating</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="0.5.0-incubating/index.html"  title="0.5-incubating">0.5-incubating</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">ASF <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="http://www.apache.org/foundation/how-it-works.html"  title="How Apache Works">How Apache Works</a>
</li>
                  
                      <li>      <a href="http://www.apache.org/foundation/"  title="Foundation">Foundation</a>
</li>
                  
                      <li>      <a href="http://www.apache.org/foundation/sponsorship.html"  title="Sponsoring Apache">Sponsoring Apache</a>
</li>
                  
                      <li>      <a href="http://www.apache.org/foundation/thanks.html"  title="Thanks">Thanks</a>
</li>
                          </ul>
      </li>
                  </ul>
          
                      <form id="search-form" action="http://www.google.com/search" method="get"  class="navbar-search pull-right" >
    
  <input value="http://atlas.incubator.apache.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
                            
            
            
            
    <iframe src="http://www.facebook.com/plugins/like.php?href=http://atlas.incubator.apache.org/atlas-docs&send=false&layout=button_count&show-faces=false&action=like&colorscheme=dark"
        scrolling="no" frameborder="0"
        style="border:none; width:80px; height:20px; margin-top: 10px;"  class="pull-right" ></iframe>
                        
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

        <ul class="nav pull-right"><li style="margin-top: 10px;">
    
    <div class="g-plusone" data-href="http://atlas.incubator.apache.org/atlas-docs" data-size="medium"  width="60px" align="right" ></div>

        </li></ul>
                              
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container">
          <div id="banner">
        <div class="pull-left">
                                                  <a href=".." id="bannerLeft">
                                                                                                <img src="images/atlas-logo.png"  alt="Apache Atlas" width="200px" height="45px"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://incubator.apache.org" id="bannerRight">
                                                                                                <img src="images/apache-incubator-logo.png"  alt="Apache Incubator"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="http://www.apache.org" class="externalLink" title="Apache">
        Apache</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="index.html" title="Atlas">
        Atlas</a>
        </li>
      <li class="divider ">/</li>
        <li class="">Building & Installing Apache Atlas</li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 2015-12-30</li> <li class="divider pull-right">|</li>
              <li id="projectVersion" class="pull-right">Version: 0.6-incubating</li>
            
                            </ul>
      </div>

      
                        
        <div id="bodyColumn" >
                                  
            <div class="section">
<h3><a name="Building__Installing_Apache_Atlas"></a>Building &amp; Installing Apache Atlas</h3></div>
<div class="section">
<h4><a name="Building_Atlas"></a>Building Atlas</h4>
<div class="source">
<pre>
git clone https://git-wip-us.apache.org/repos/asf/incubator-atlas.git atlas

cd atlas

export MAVEN_OPTS=&quot;-Xmx1024m -XX:MaxPermSize=256m&quot; &amp;&amp; mvn clean install

</pre></div>
<p>Once the build successfully completes, artifacts can be packaged for deployment.</p>
<div class="source">
<pre>

mvn clean package -Pdist


</pre></div>
<p>Tar can be found in atlas/distro/target/apache-atlas-${project.version}-bin.tar.gz</p>
<p>Tar is structured as follows</p>
<div class="source">
<pre>

|- bin
   |- atlas_start.py
   |- atlas_stop.py
   |- atlas_config.py
   |- quick_start.py
   |- cputil.py
|- conf
   |- application.properties
   |- client.properties
   |- atlas-env.sh
   |- log4j.xml
   |- solr
      |- currency.xml
      |- lang
         |- stopwords_en.txt
      |- protowords.txt
      |- schema.xml
      |- solrconfig.xml
      |- stopwords.txt
      |- synonyms.txt
|- docs
|- server
   |- webapp
      |- atlas.war
|- README
|- NOTICE.txt
|- LICENSE.txt
|- DISCLAIMER.txt
|- CHANGES.txt


</pre></div></div>
<div class="section">
<h4><a name="Installing__Running_Atlas"></a>Installing &amp; Running Atlas</h4>
<p><b>Installing Atlas</b></p>
<div class="source">
<pre>
tar -xzvf apache-atlas-${project.version}-bin.tar.gz
* cd atlas-${project.version}

</pre></div>
<p><b>Configuring Atlas</b></p>
<p>By default config directory used by Atlas is {package dir}/conf. To override this set environment variable METADATA_CONF to the path of the conf dir.</p>
<p>atlas-env.sh has been added to the Atlas conf. This file can be used to set various environment variables that you need for you services. In addition you can set any other environment variables you might need. This file will be sourced by atlas scripts before any commands are executed. The following environment variables are available to set.</p>
<div class="source">
<pre>
# The java implementation to use. If JAVA_HOME is not found we expect java and jar to be in path
#export JAVA_HOME=

# any additional java opts you want to set. This will apply to both client and server operations
#export METADATA_OPTS=

# any additional java opts that you want to set for client only
#export METADATA_CLIENT_OPTS=

# java heap size we want to set for the client. Default is 1024MB
#export METADATA_CLIENT_HEAP=

# any additional opts you want to set for atlas service.
#export METADATA_SERVER_OPTS=

# java heap size we want to set for the atlas server. Default is 1024MB
#export METADATA_SERVER_HEAP=

# What is is considered as atlas home dir. Default is the base locaion of the installed software
#export METADATA_HOME_DIR=

# Where log files are stored. Defatult is logs directory under the base install location
#export METADATA_LOG_DIR=

# Where pid files are stored. Defatult is logs directory under the base install location
#export METADATA_PID_DIR=

# where the atlas titan db data is stored. Defatult is logs/data directory under the base install location
#export METADATA_DATA_DIR=

# Where do you want to expand the war file. By Default it is in /server/webapp dir under the base install dir.
#export METADATA_EXPANDED_WEBAPP_DIR=

</pre></div>
<p><b>NOTE for Mac OS users</b></p>
<div class="source">
<pre>
If you are using a Mac OS, you will need to configure the METADATA_SERVER_OPTS (explained above).

In  {package dir}/conf/atlas-env.sh uncomment the following line
#export METADATA_SERVER_OPTS=

and change it to look as below
export METADATA_SERVER_OPTS=&quot;-Djava.awt.headless=true -Djava.security.krb5.realm= -Djava.security.krb5.kdc=&quot;

</pre></div>
<p>* Hbase as the Storage Backend for the Graph Repository</p>
<p>By default, Atlas uses Titan as the graph repository and is the only graph repository implementation available currently. The HBase versions currently supported are 1.1.x. For configuring ATLAS graph persistence on HBase, please go through the &quot;Configuration - Graph persistence engine - HBase&quot; section for more details.</p>
<p>Pre-requisites for running HBase as a distributed cluster  * 3 or 5 <a href="./ZooKeeper.html">ZooKeeper</a> nodes  * Atleast 3 <a href="./RegionServer.html">RegionServer</a> nodes. It would be ideal to run the <a href="./DataNodes.html">DataNodes</a> on the same hosts as the Region servers for data locality.</p>
<p>* Configuring SOLR as the Indexing Backend for the Graph Repository</p>
<p>By default, Atlas uses Titan as the graph repository and is the only graph repository implementation available currently. For configuring Titan to work with Solr, please follow the instructions below</p>
<div class="source">
<pre>
* Install solr if not already running. The version of SOLR supported is 5.2.1. Could be installed from http://archive.apache.org/dist/lucene/solr/5.2.1/solr-5.2.1.tgz

* Start solr in cloud mode.
  SolrCloud mode uses a ZooKeeper Service as a highly available, central location for cluster management.
  For a small cluster, running with an existing ZooKeeper quorum should be fine. For larger clusters, you would want to run separate multiple ZooKeeper quorum with atleast 3 servers.
  Note: Atlas currently supports solr in &quot;cloud&quot; mode only. &quot;http&quot; mode is not supported. For more information, refer solr documentation - https://cwiki.apache.org/confluence/display/solr/SolrCloud

* For e.g., to bring up a Solr node listening on port 8983 on a machine, you can use the command:
      &lt;verbatim&gt;
      $SOLR_HOME/bin/solr start -c -z &lt;zookeeper_host:port&gt; -p 8983
      
</pre></div>
<p>* Run the following commands from SOLR_HOME directory to create collections in Solr corresponding to the indexes that Atlas uses. In the case that the ATLAS and SOLR instance are on 2 different hosts,   first copy the required configuration files from ATLAS_HOME/conf/solr on the ATLAS instance host to the Solr instance host. SOLR_CONF in the below mentioned commands refer to the directory where the solr configuration files   have been copied to on Solr host:</p>
<p>bin/solr create -c vertex_index -d SOLR_CONF -shards #numShards -replicationFactor #replicationFactor   bin/solr create -c edge_index -d SOLR_CONF -shards #numShards -replicationFactor #replicationFactor   bin/solr create -c fulltext_index -d SOLR_CONF -shards #numShards -replicationFactor #replicationFactor</p>
<p>Note: If numShards and replicationFactor are not specified, they default to 1 which suffices if you are trying out solr with ATLAS on a single node instance.   Otherwise specify numShards according to the number of hosts that are in the Solr cluster and the maxShardsPerNode configuration.   The number of shards cannot exceed the total number of Solr nodes in your SolrCloud cluster.</p>
<p>The number of replicas (replicationFactor) can be set according to the redundancy required.</p>
<p>* Change ATLAS configuration to point to the Solr instance setup. Please make sure the following configurations are set to the below values in ATLAS_HOME//conf/application.properties  atlas.graph.index.search.backend=solr5  atlas.graph.index.search.solr.mode=cloud  atlas.graph.index.search.solr.zookeeper-url=&lt;the ZK quorum setup for solr as comma separated value&gt; eg: 10.1.6.4:2181,10.1.6.5:2181</p>
<p>* Restart Atlas &lt;/verbatim&gt;</p>
<p>For more information on Titan solr configuration , please refer <a class="externalLink" href="http://s3.thinkaurelius.com/docs/titan/0.5.4/solr.htm">http://s3.thinkaurelius.com/docs/titan/0.5.4/solr.htm</a></p>
<p>Pre-requisites for running Solr in cloud mode   * Memory - Solr is both memory and CPU intensive. Make sure the server running Solr has adequate memory, CPU and disk.     Solr works well with 32GB RAM. Plan to provide as much memory as possible to Solr process   * Disk - If the number of entities that need to be stored are large, plan to have at least 500 GB free space in the volume where Solr is going to store the index data   * <a href="./SolrCloud.html">SolrCloud</a> has support for replication and sharding. It is highly recommended to use <a href="./SolrCloud.html">SolrCloud</a> with at least two Solr nodes running on different servers with replication enabled.     If using <a href="./SolrCloud.html">SolrCloud</a>, then you also need <a href="./ZooKeeper.html">ZooKeeper</a> installed and configured with 3 or 5 <a href="./ZooKeeper.html">ZooKeeper</a> nodes</p>
<p><b>Starting Atlas Server</b></p>
<div class="source">
<pre>
bin/atlas_start.py [-port &lt;port&gt;]

</pre></div>
<p>By default, * To change the port, use -port option. * atlas server starts with conf from {package dir}/conf. To override this (to use the same conf with multiple atlas upgrades), set environment variable METADATA_CONF to the path of conf dir</p>
<p><b>Using Atlas</b></p>
<div class="source">
<pre>
* Quick start model - sample model and data
  bin/quick_start.py [&lt;atlas endpoint&gt;]

* Verify if the server is up and running
  curl -v http://localhost:21000/api/atlas/admin/version
  {&quot;Version&quot;:&quot;v0.1&quot;}

* List the types in the repository
  curl -v http://localhost:21000/api/atlas/types
  {&quot;results&quot;:[&quot;Process&quot;,&quot;Infrastructure&quot;,&quot;DataSet&quot;],&quot;count&quot;:3,&quot;requestId&quot;:&quot;1867493731@qtp-262860041-0 - 82d43a27-7c34-4573-85d1-a01525705091&quot;}

* List the instances for a given type
  curl -v http://localhost:21000/api/atlas/entities?type=hive_table
  {&quot;requestId&quot;:&quot;788558007@qtp-44808654-5&quot;,&quot;list&quot;:[&quot;cb9b5513-c672-42cb-8477-b8f3e537a162&quot;,&quot;ec985719-a794-4c98-b98f-0509bd23aac0&quot;,&quot;48998f81-f1d3-45a2-989a-223af5c1ed6e&quot;,&quot;a54b386e-c759-4651-8779-a099294244c4&quot;]}

  curl -v http://localhost:21000/api/atlas/entities/list/hive_db

* Search for entities (instances) in the repository
  curl -v http://localhost:21000/api/atlas/discovery/search/dsl?query=&quot;from hive_table&quot;

</pre></div>
<p><b>Dashboard</b></p>
<p>Once atlas is started, you can view the status of atlas entities using the Web-based dashboard. \You can open your browser at the corresponding port to use the web UI.</p>
<p><b>Stopping Atlas Server</b></p>
<div class="source">
<pre>
bin/atlas_stop.py

</pre></div></div>
                  </div>
          </div>

    <hr/>

    <footer>
            <div class="container">
              <div class="row span12">Copyright &copy;                    2015
                        <a href="http://www.apache.org">Apache Software Foundation</a>.
            All Rights Reserved.      
                    
      </div>

                          
                <p id="poweredBy" class="pull-right">
                          <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
              </p>
        
                </div>
    </footer>
  </body>
</html>
