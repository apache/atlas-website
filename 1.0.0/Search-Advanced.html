<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8 from src/site/twiki/Search-Advanced.twiki at 2018-06-03
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20180603" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Apache Atlas &#x2013; Advanced Search</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarEnabled">
    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
            <div class="container" style="width: 68%;"><div class="nav-collapse">
            <ul class="nav">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Apache Atlas <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="index.html" title="Overview">Overview</a></li>
            <li><a href="license.html" title="License">License</a></li>
            <li><a href="Downloads.html" title="Downloads">Downloads</a></li>
            <li><a href="https://cwiki.apache.org/confluence/display/ATLAS" title="Wiki">Wiki</a></li>
            <li><a href="https://git-wip-us.apache.org/repos/asf/atlas.git" title="Git">Git</a></li>
            <li><a href="https://issues.apache.org/jira/browse/ATLAS" title="Jira">Jira</a></li>
            <li><a href="https://reviews.apache.org/groups/atlas/?sort=-time_added" title="Review Board">Review Board</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Information <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="project-info.html" title="Summary">Summary</a></li>
            <li><a href="mail-lists.html" title="Mailing Lists">Mailing Lists</a></li>
            <li><a href="team-list.html" title="Team">Team</a></li>
            <li><a href="issue-tracking.html" title="Issue Tracking">Issue Tracking</a></li>
            <li><a href="source-repository.html" title="Source Repository">Source Repository</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Releases <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="http://www.apache.org/dyn/closer.cgi/atlas/1.0.0/" title="1.0.0">1.0.0</a></li>
            <li><a href="http://www.apache.org/dyn/closer.cgi/atlas/0.8.2/" title="0.8.2">0.8.2</a></li>
            <li><a href="http://www.apache.org/dyn/closer.cgi/atlas/0.8.1/" title="0.8.1">0.8.1</a></li>
            <li><a href="http://archive.apache.org/dist/incubator/atlas/0.8.0-incubating/" title="0.8-incubating">0.8-incubating</a></li>
            <li><a href="http://archive.apache.org/dist/incubator/atlas/0.7.1-incubating/" title="0.7.1-incubating">0.7.1-incubating</a></li>
            <li><a href="http://archive.apache.org/dist/incubator/atlas/0.7.0-incubating/" title="0.7-incubating">0.7-incubating</a></li>
            <li><a href="http://archive.apache.org/dist/incubator/atlas/0.6.0-incubating/" title="0.6-incubating">0.6-incubating</a></li>
            <li><a href="http://archive.apache.org/dist/incubator/atlas/0.5.0-incubating/" title="0.5-incubating">0.5-incubating</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../index.html" title="latest">latest</a></li>
            <li><a href="../1.0.0/index.html" title="1.0.0">1.0.0</a></li>
            <li><a href="../0.8.2/index.html" title="0.8.2">0.8.2</a></li>
            <li><a href="../0.8.1/index.html" title="0.8.1">0.8.1</a></li>
            <li><a href="../0.8.0-incubating/index.html" title="0.8-incubating">0.8-incubating</a></li>
            <li><a href="../0.7.1-incubating/index.html" title="0.7.1-incubating">0.7.1-incubating</a></li>
            <li><a href="../0.7.0-incubating/index.html" title="0.7-incubating">0.7-incubating</a></li>
            <li><a href="../0.6.0-incubating/index.html" title="0.6-incubating">0.6-incubating</a></li>
            <li><a href="../0.5.0-incubating/index.html" title="0.5-incubating">0.5-incubating</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">ASF <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="http://www.apache.org/foundation/how-it-works.html" title="How Apache Works">How Apache Works</a></li>
            <li><a href="https://www.apache.org/events/current-event" title="Events">Events</a></li>
            <li><a href="https://www.apache.org/licenses/" title="License">License</a></li>
            <li><a href="http://www.apache.org/foundation/" title="Foundation">Foundation</a></li>
            <li><a href="http://www.apache.org/foundation/sponsorship.html" title="Sponsoring Apache">Sponsoring Apache</a></li>
            <li><a href="http://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></li>
        </ul>
      </li>
            </ul>
<form id="search-form" action="https://www.google.com/search" method="get"  class="navbar-search pull-right" >
  <input value="http://atlas.apache.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript">asyncJs( 'https://cse.google.com/brand?form=search-form' )</script>
    <iframe src="https://www.facebook.com/plugins/like.php?href=http://atlas.apache.org/atlas-docs&send=false&layout=button_count&show-faces=false&action=like&colorscheme=dark"
        scrolling="no" frameborder="0"
        style="border:none; width:100px; height:20px; margin-top: 10px;"  class="pull-right" ></iframe>
    <script type="text/javascript">asyncJs( 'https://apis.google.com/js/plusone.js' )</script>
    <ul class="nav pull-right"><li style="margin-top: 10px;">
    <div class="g-plusone" data-href="http://atlas.apache.org/atlas-docs" data-size="medium"  width="60px" align="right" ></div>
    </li></ul>
            </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div id="banner">
        <div class="pull-left"><a href=".." id="bannerLeft"><img src="images/atlas-logo.png"  alt="Apache Atlas" width="200px" height="45px"/></a></div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
      <li class=""><a href="http://www.apache.org" class="externalLink" title="Apache">Apache</a><span class="divider">/</span></li>
      <li class=""><a href="index.html" title="Atlas">Atlas</a><span class="divider">/</span></li>
    <li class="active ">Advanced Search</li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2018-06-03</li>
          <li id="projectVersion" class="pull-right">Version: 1.0.0</li>
        </ul>
      </div>
        <div id="bodyColumn" >
<div class="section">
<h2><a name="Advanced_Search"></a>Advanced Search</h2></div>
<div class="section">
<h4><a name="Background"></a>Background</h4>
<p>Advanced Search in Atlas is also referred to as DSL-based Search.</p>
<p>Domain Specific Search (DSL) is a language with simple constructs that help users navigate Atlas data repository. The syntax loosely emulates the popular Structured Query Language (SQL) from relation database world.</p>
<p>Benefits of DSL:</p>
<ul>
<li>Abstracts the implementation-level database constructs. This avoids the necessity of knowing about the underlying graph database constructs.</li>
<li>User are provided with an abstraction that helps them retrieve the data by just being aware of the types and their relationships within their dataset.</li>
<li>Allows for a way to specify the desired output.</li>
<li>Use of classifications is accounted for in the syntax.</li>
<li>Provides way to group and aggregate results.</li></ul>
<p>We will be using the quick start dataset in the examples that follow. This dataset is comprehensive enough to be used to to demonstrate the various features of the language.</p>
<p>For details on the grammar, please refer to Atlas DSL Grammer on <a class="externalLink" href="https://github.com/apache/atlas/blob/master/repository/src/main/java/org/apache/atlas/query/antlr4/AtlasDSLParser.g4">Github</a> (Antlr G4 format).</p></div>
<div class="section">
<h3><a name="Using_Advanced_Search"></a>Using Advanced Search</h3>
<p>Within the Atlas UI, select Advanced in the Search pane on the left.</p>
<p>Notice that the <i>Favorite Searches</i> pane below the <i>Search By Query</i> box. Like <i>Basic Search</i>, it is possible to save the <i>Advanced Searches</i> as well.</p></div>
<div class="section">
<h3><a name="Introduction_to_Domain_Specific_Language"></a>Introduction to Domain Specific Language</h3>
<p>DSL uses the familiar SQL-like syntax.</p>
<p>At a high-level a query has a <i>from-where-select</i> format. Additional keywords like <i>grouby</i>, <i>orderby</i>, <i>limit</i> can be used to added to affect the output. We will see examples of these below.</p></div>
<div class="section">
<h4><a name="From_Clause"></a>From Clause</h4>
<p>Specifying the <i>from</i> clause is mandatory. Using the <i>from</i> keyword itself is optional. The value specified in the <i>from</i> clause acts as the source or starting point for the rest of the query to source its inputs.</p>
<p>Example: To retrieve all entities of type <i>DB</i>:</p>
<div class="source"><pre class="prettyprint">
DB
from DB
</pre></div>
<p>In the absence of <i>where</i> for filtering on the source, the dataset fetched by the <i>from</i> clause is everything from the database. Based on the size of the data present in the database, there is a potential to overwhelm the server. The query processor thus adds <i>limit</i> clause with a default value set. See the section on <i>limit</i> clause for details.</p></div>
<div class="section">
<h4><a name="Where_Clause"></a>Where Clause</h4>
<p>The <i>where</i> clause allows for filtering over the dataset. This achieved by using conditions within the where clause.</p>
<p>A conditions is identifier followed by an operator followed by a literal. Literal must be enclosed in single or double quotes. Example, <i>name = &quot;Sales&quot;</i>. An identifier can be name of the property of the type specified in the <i>from</i> clause or an alias.</p>
<p>Example: To retrieve entity of type <i>Table</i> with a specific name say time_dim:</p>
<div class="source"><pre class="prettyprint">
from Table where name = 'time_dim'
</pre></div>
<p>It is possible to specify multiple conditions by combining them using <i>and</i>, <i>or</i> operators.</p>
<p>Example: To retrieve entity of type Table with name that can be either time_dim or customer_dim:</p>
<div class="source"><pre class="prettyprint">
from Table where name = 'time_dim' or name = 'customer_dim'
</pre></div>
<p>Filtering based on a list of values is done using by specifying the values in the square brackets. A value array is a list of values enclosed within square brackets. This is a simple way to specify an OR clause on an identifier.</p>
<p>Note that having several OR clauses on the same attribute may be inefficient. Alternate way is to use the value array as shown in the example below.</p>
<p>Example: The query in the example above can be written using a value array as shown below.</p>
<div class="source"><pre class="prettyprint">
from Table where name = [&quot;customer_dim&quot;, &quot;time_dim&quot;]
</pre></div>
<p>A condition that uses the LIKE operator, allows for filtering using wildcards like '*' or '?'.</p>
<p>Example: To retrieve entity of type <i>Table</i> whose name ends with '_dim':</p>
<div class="source"><pre class="prettyprint">
from Table where name LIKE '*_dim'
</pre></div>
<p>Additional forms of regular expressions can also be used.</p>
<p>Example: To retrieve <i>DB</i> whose name starts with <i>R</i> followed by has any 3 characters, followed by <i>rt</i> followed by at least 1 character, followed by none or any number of characters.</p>
<div class="source"><pre class="prettyprint">
DB where name like &quot;R???rt?*&quot;
</pre></div></div>
<div class="section">
<h5><a name="Using_Date_Literals"></a>Using Date Literals</h5>
<p>Dates used in literals need to be specified using the ISO 8601 format.</p>
<p>Dates in this format follow this notation:</p>
<ul>
<li><i>yyyy-MM-ddTHH:mm:ss.SSSZ</i>. Which means, year-month-day followed by time in hour-minutes-seconds-milli-seconds. Date and time need to be separated by 'T'. It should end with 'Z'.</li>
<li><i>yyyy-MM-dd</i>. Which means, year-month-day.</li></ul>
<p>Example: Date represents December 11, 2017 at 2:35 AM.</p>
<div class="source"><pre class="prettyprint">2017-12-11T02:35:0.0Z
</pre></div>
<p>Example: To retrieve entity of type <i>Table</i> created within 2017 and 2018.</p>
<div class="source"><pre class="prettyprint">
from Table where createTime &lt; '2018-01-01' and createTime &gt; '2017-01-01'
</pre></div></div>
<div class="section">
<h5><a name="Using_Boolean_Literals"></a>Using Boolean Literals</h5>
<p>Properties of entities of type boolean can be used within queries.</p>
<p>Eample: To retrieve entity of type hdfs_path whose attribute <i>isFile</i> is set to <i>true</i> and whose name is <i>Invoice</i>.</p>
<div class="source"><pre class="prettyprint">
from hdfs_path where isFile = true or name = &quot;Invoice&quot;
</pre></div>
<p>Valid values for boolean literals are 'true' and 'false'.</p></div>
<div class="section">
<h4><a name="Existence_of_a_Property"></a>Existence of a Property</h4>
<p>The has keyword can be used with or without the where clause. It is used to check existence of a property in an entity.</p>
<p>Example: To retreive entity of type Table with a property locationUri.</p>
<div class="source"><pre class="prettyprint">
Table has locationUri
from Table where Table has locationUri

</pre></div></div>
<div class="section">
<h4><a name="Select_Clause"></a>Select Clause</h4>
<p>If you noticed the output displayed on the web page, it displays a tabular display, each row corresponding to an entity and columns are properties of that entity. The select clause allows for choosing the properties of entity that are of interest.</p>
<p>Example: To retrieve entity of type <i>Table</i> with few properties:</p>
<div class="source"><pre class="prettyprint">
from Table select owner, name, qualifiedName

</pre></div>
<p>Example: To retrieve entity of type Table for a specific table with some properties.</p>
<div class="source"><pre class="prettyprint">
from Table where name = 'customer_dim' select owner, name, qualifiedName
</pre></div>
<p>To display column headers that are more meaningful, aliases can be added using the 'as' clause.</p>
<p>Example: To display column headers as 'Owner', 'Name' and 'FullName'.</p>
<div class="source"><pre class="prettyprint">
from Table select owner as Owner, name as Name, qualifiedName as FullName
</pre></div></div>
<div class="section">
<h5><a name="Note_About_Select_Clauses"></a>Note About Select Clauses</h5>
<p>Given the complexity involved in using select clauses, these are the few rules to remember when using select clauses:</p>
<ul>
<li>Works with all immediate attributes.</li>
<li>Works with Immediate attributes and aggregation on immediate attributes.</li>
<li>Referred attributes cannot be mixed with immediate attributes.</li></ul>
<p>Example: To retrieve entity of type Table with name 'Sales' and display 'name' and 'owner' attribute of the referred entity DB.</p>
<div class="source"><pre class="prettyprint">
Table where name = 'abcd' select DB.name, DB.owner
</pre></div>
<p>Current implementation does not allow the following:</p>
<div class="source"><pre class="prettyprint">
Table where name = 'abcd' select DB.name, Table.name
</pre></div></div>
<div class="section">
<h4><a name="Classification-based_Filtering"></a>Classification-based Filtering</h4>
<p>In order to retrieve entities based on classification, a query would use <i>is</i> or <i>isa</i> keywords.</p>
<p>Example: To retrieve all entities of type <i>Table</i> that are tagged with <i>Dimension</i> classification.</p>
<div class="source"><pre class="prettyprint">
from Table isa Dimension
</pre></div>
<p>Since, from is optional and <i>is</i> (or <i>isa</i>) are equivalent, the following queries yield the same results:</p>
<div class="source"><pre class="prettyprint">
Table is Dimension
</pre></div>
<p>The <i>is</i> and <i>isa</i> clauses can also be used in <i>where</i> condition like:</p>
<div class="source"><pre class="prettyprint">
from Table where Table isa Dimension
</pre></div>
<p>To search for all entities having a particular classification, simply use the name of the classification.</p>
<p>Example: To retrieve all entities that have <i>Dimension</i> classification.</p>
<div class="source"><pre class="prettyprint">
Dimension
</pre></div></div>
<div class="section">
<h4><a name="Limit_.26_Offset_Clauses"></a>Limit &amp; Offset Clauses</h4>
<p>Often a query yields large number of results. To limit the outcome of the query, the limit and offset clauses are used.</p>
<p>Example: To retrieve only the 5 entities from a result set.</p>
<div class="source"><pre class="prettyprint">
Column limit 5
</pre></div>
<p>The offset clauses retrieves results after the offset value.</p>
<p>Example: To retrieve only 5 entities from the result set after skipping the first 10.</p>
<div class="source"><pre class="prettyprint">
Column limit 5 offset 10
</pre></div>
<p>The <i>limit</i> and <i>offset</i> clauses are usually specified in conjunction.</p>
<p>If no limit clause is specified in the query, a limit clause with a default limit (usually 100) is added to the query. This prevents the query from inadvertently fetching large number of results.</p>
<p>The <i>offset</i> clause is useful for displaying results in a user interface where few results from the result set are showing and more results are fetched as the user advances to next page.</p></div>
<div class="section">
<h4><a name="Ordering_Results"></a>Ordering Results</h4>
<p>The <i>orderby</i> clause allows for sorting of results. Results are sorted in ascending order by default. Only immediate attributes can be used within this clause.</p>
<p>Ordering can be changed by using:</p>
<ul>
<li>ASC Sort in ascending order. This is the default. If no ordering is specified after the <i>orderby</i> clause.</li>
<li>DESC Sort in descending order. This needs to be explicitly specified after the <i>orderby</i> clause.</li></ul>
<p>Example: To retrieve the entities of type <i>Column</i> that are sorted in ascending order using the name property.</p>
<div class="source"><pre class="prettyprint">
from Column orderby name
from Column orderby name asc
</pre></div>
<p>Example: Same results as above except that they are sorted in descending order.</p>
<div class="source"><pre class="prettyprint">
from Column orderby name desc
</pre></div></div>
<div class="section">
<h4><a name="Aggregate_Functions"></a>Aggregate Functions</h4>
<p>Let's look at aggregate functions:</p>
<p></p>
<ul>
<li><i>sum</i>: Adds (sums up) a value of the property specified, within the result set.</li>
<li><i>min</i>: Finds the minimum value of the property specified, within a result set.</li>
<li><i>max</i>: Finds the maximum value of the property specified, within a result set.</li>
<li><i>count</i>: Finds the number of items specified by the group by clause.</li></ul>
<p>These work only on immediate attributes.</p>
<p>Other examples of these in the <i>Grouping Results</i> section.</p></div>
<div class="section">
<h5><a name="The_count_Keyword"></a>The count Keyword</h5>
<p>Shows the number of items in a result set.</p>
<p>Example: To know how may entities of a type Column.</p>
<div class="source"><pre class="prettyprint">
Column select count()
</pre></div>
<p>Example: Same as above with alias.</p>
<div class="source"><pre class="prettyprint">
Column select count() as Cols
</pre></div>
<p>Example: To find the number of tables in a database.</p>
<div class="source"><pre class="prettyprint">
Table where db.name = &quot;Reporting&quot; select count()
</pre></div></div>
<div class="section">
<h5><a name="The_max_Keyword"></a>The max Keyword</h5>
<p>Using this keyword it is possible to retrieve the maximum value of a property for an entity.</p>
<p>Example: Get the most recently created value of the <i>createTime</i> property of the Table entity.</p>
<div class="source"><pre class="prettyprint">
Table select max(createTime)
</pre></div></div>
<div class="section">
<h5><a name="The_min_Keyword"></a>The min Keyword</h5>
<p>Using this keyword it is possible to retrieve the minimum value of a property for an entity.</p>
<p>Example: Get the least recently created value of the <i>createTime</i> property of the Table entity.</p>
<div class="source"><pre class="prettyprint">
Table select min(createTime)
</pre></div></div>
<div class="section">
<h4><a name="Grouping_Results"></a>Grouping Results</h4>
<p>The <i>groupby</i> clause groups results within the result using specified property.</p>
<p>Example: To retrieve entity of type Table such that tables belonging to an owner are together (grouped by owner).</p>
<div class="source"><pre class="prettyprint">
Table groupby(owner)
</pre></div>
<p>While <i>groupby</i> can work without <i>select</i>, if aggregate functions are used within <i>select</i> clause, using <i>groupby</i> clause becomes mandatory as aggregate functions operate on a group.</p>
<p>Example: To retrieve entity of type Table such we know the most recently created entity.</p>
<div class="source"><pre class="prettyprint">
Table groupby(createTime) select owner, name, max(createTime)
</pre></div>
<p>Example: To retrieve entity of type Table such we know the oldest entity.</p>
<div class="source"><pre class="prettyprint">
Table groupby(createTime) select owner, name, min(createTime)
</pre></div>
<p>Example: To know the number of entities owned by each owner.</p>
<div class="source"><pre class="prettyprint">
Table groupby(owner) select owner, count()
</pre></div></div>
<div class="section">
<h4><a name="Where_Clause_With_Complex_Types"></a>Where Clause With Complex Types</h4>
<p>In the discussion so far we looked at where clauses with primitive types. This section will look at using properties that are non-primitive types.</p>
<p>In this model, the DB is modeled such that it is aware of all the Table it contains. Table on the other hand is aware of existence of the DB but is not aware of all the other <i>Table</i> instances within the system. Each Table maintains reference of the <i>DB</i> it belongs to.</p>
<p>Similar structure exists within the <i>hive</i> data model.</p>
<p>Example: To retrieve all the instances of the <i>Table</i> belonging to a database named 'Sales':</p>
<div class="source"><pre class="prettyprint">
Table where db.name = &quot;Sales&quot;
</pre></div>
<p>The entity Column is modeled in a similar way. Each Table entity has outward edges pointing to Column entity instances corresponding to each column within the table.</p>
<p>Example: To retrieve all the Column entities for a given Table.</p>
<div class="source"><pre class="prettyprint">
Table where name = &quot;time_dim&quot; select columns
</pre></div>
<p>The propeties of each <i>Column</i> entity type are displayed.</p></div>
<div class="section">
<h4><a name="Using_System_Attributes"></a>Using System Attributes</h4>
<p>Each type defined within Atlas gets few attributes by default. These attributes help with internal book keeping of the entities. All the system attributes are prefixed with '__' (double underscore). This helps in identifying them from other attributes.</p>
<p>Following are the system attributes:</p>
<ul>
<li>__guid Each entity within Atlas is assigned a globally unique identifier (GUID for short).</li>
<li>__modifiedBy Name of the user who last modified the entity.</li>
<li>__createdBy Name of the user who created the entity.</li>
<li>__state Current state of the entity. Please see below for details.</li>
<li>__timestamp Timestamp (date represented as integer) of the entity at the time of creation.</li>
<li>__modificationTimestamp Timestamp (date represented as integer) of the entity at the time of last modification.</li></ul></div>
<div class="section">
<h5><a name="State_of_an_Entity"></a>State of an Entity</h5>
<p>Entity within Atlas can be in the following states:</p>
<ul>
<li>ACTIVE This is the state of entities that when it is available and is used within the system. It can be retrieved by default by searches.</li>
<li>DELETED When an entity is deleted, it's state is marked as DELETED. Entity in this state does not show up in search results. Explicit request needs to be made to retrieve this entity.</li></ul></div>
<div class="section">
<h5><a name="Using_System_Attributes_in_Queries"></a>Using System Attributes in Queries</h5>
<p>Example: To retrieve all entities that are deleted.</p>
<div class="source"><pre class="prettyprint">
Asset where __state = &quot;DELETED&quot;
</pre></div>
<p>Example: To retrieve entity GUIDs.</p>
<div class="source"><pre class="prettyprint">
Table select __guid
</pre></div>
<p>Example: To retrieve several system attributes.</p>
<div class="source"><pre class="prettyprint">
hive_db select __timestamp, __modificationTimestamp, __state, __createdBy
</pre></div></div>
<div class="section">
<h3><a name="Advanced_Search_REST_API"></a>Advanced Search REST API</h3>
<p>Relevant models for these operations:</p>
<ul>
<li><i><a class="externalLink" href="https://github.com/apache/atlas/blob/master/intg/src/main/java/org/apache/atlas/model/discovery/AtlasSearchResult.java">AtlasSearchResult</a></i></li>
<li><i><a class="externalLink" href="https://github.com/apache/atlas/blob/master/intg/src/main/java/org/apache/atlas/exception/AtlasBaseException.java">AtlasBaseException</a></i></li></ul></div>
<div class="section">
<h4><a name="The_V2_API"></a>The V2 API</h4>
<p></p>
<table border="0" class="table table-striped">
<tr class="a">
<th>Get Results using DSL Search</th>
<td></td></tr>
<tr class="b">
<td><i>Example</i></td>
<td>See Examples sections below.</td></tr>
<tr class="a">
<td><i>URL</i></td>
<td><i>api/atlas/v2/search/dsl</i></td></tr>
<tr class="b">
<td><i>Method</i></td>
<td><i>GET</i></td></tr>
<tr class="a">
<td><i>URL Parameters</i></td>
<td><i>query</i>: Query conforming to DSL syntax.</td></tr>
<tr class="b">
<td></td>
<td><i>typeName</i>: Type name of the entity to be retrived.</td></tr>
<tr class="a">
<td></td>
<td><i>classification</i>: Classification associated with the type or query.</td></tr>
<tr class="b">
<td></td>
<td><i>limit</i>: Maximum number of items in the result set.</td></tr>
<tr class="a">
<td></td>
<td><i>offset</i>: Starting index of the item in the result set.</td></tr>
<tr class="b">
<td><i>Data Parameters</i></td>
<td><i>None</i></td></tr>
<tr class="a">
<td><i>Success Response</i></td>
<td>The JSON will correspond to <a class="externalLink" href="https://github.com/apache/atlas/blob/master/intg/src/main/java/org/apache/atlas/model/discovery/AtlasSearchResult.java">AtlasSearchResult</a>.</td></tr>
<tr class="b">
<td><i>Error Response</i></td>
<td>Errors that are handled within the system will be returned as <a class="externalLink" href="https://github.com/apache/atlas/blob/master/intg/src/main/java/org/apache/atlas/exception/AtlasBaseException.java">AtlasBaseException</a>.</td></tr>
<tr class="a">
<td><i>Method Signature</i></td>
<td>@GET</td></tr>
<tr class="b">
<td></td>
<td>@Path(&quot;/dsl&quot;)</td></tr>
<tr class="a">
<td></td>
<td>@Consumes(Servlets.JSON_MEDIA_TYPE)</td></tr>
<tr class="b">
<td></td>
<td>@Produces(Servlets.JSON_MEDIA_TYPE)</td></tr></table><b>Examples</b>
<div class="source"><pre class="prettyprint">
curl -X GET -u admin:admin -H &quot;Content-Type: application/json&quot; &quot;http://localhost:21000/api/atlas/v2/search/dsl?typeName=Table&quot;
curl -X GET -u admin:admin -H &quot;Content-Type: application/json&quot; &quot;http://localhost:21000/api/atlas/v2/search/dsl?typeName=Column&amp;classification=PII&quot;
curl -X GET -u admin:admin -H &quot;Content-Type: application/json&quot; &quot;http://localhost:21000/api/atlas/v2/search/dsl?typeName=Table&amp;classification=Dimension&amp;limit=10&amp;offset=2&quot;
curl -X GET -u admin:admin -H &quot;Content-Type: application/json&quot; &quot;http://localhost:21000/api/atlas/v2/search/dsl?query=Table%20isa%20Dimension&quot;
curl -X GET -u admin:admin -H &quot;Content-Type: application/json&quot; &quot;http://localhost:21000/api/atlas/v2/search/dsl?query=Table%20isa%20Dimension&amp;limit=5&amp;offset=2&quot;
</pre></div></div>
<div class="section">
<h3><a name="Implementation_Approach"></a>Implementation Approach</h3>
<p>The general approach followed in implementation of DSL within Atlas can be enumerated in following steps:</p>
<ul>
<li>Parser parses the incoming query for syntax.</li>
<li>Abstract syntax tree is generated by for a query that is parsed successfully.</li>
<li>Syntax tree is 'walked' using visitor pattern.</li>
<li>Each 'visit' within the tree adds a step in the Gremlin pipeline.</li>
<li>When done, the generated script is executed using Gremlin Script Engine.</li>
<li>Results generated be the query, if any, are processed and packaged in <a href="./AtlasSearchResult.html">AtlasSearchResult</a> structure.</li></ul></div>
<div class="section">
<h3><a name="Differences_Between_Master_and_Earlier_Versions"></a>Differences Between Master and Earlier Versions</h3>
<p>The following clauses are no longer supported:</p>
<ul>
<li>path</li>
<li>loop</li></ul></div>
<div class="section">
<h3><a name="Resources"></a>Resources</h3>
<p></p>
<ul>
<li>Antlr <a class="externalLink" href="https://pragprog.com/book/tpantlr2/the-definitive-antlr-4-reference">Book</a>.</li>
<li>Antlr <a class="externalLink" href="https://github.com/antlr/antlr4/blob/master/doc/getting-started.md">Quick Start</a>.</li>
<li>Atlas DSL Grammar on <a class="externalLink" href="https://github.com/apache/atlas/blob/master/repository/src/main/java/org/apache/atlas/query/antlr4/AtlasDSLParser.g4">Github</a> (Antlr G4 format).</li></ul></div>
        </div>
    </div>
    <hr/>
    <footer>
      <div class="container">
        <div class="row">
<p><a href="https://www.apache.org/foundation/contributing"><img src="https://www.apache.org/images/SupportApache-small.png" alt="Support the ASF" id="asf-logo" height="20" width="20" /></a>Copyright © 2011-2018 The Apache Software Foundation. Licensed under the <a href="https://www.apache.org/licenses/">Apache License, Version 2.0</a>.<br/>
Apache Atlas, Atlas, Apache, the Apache feather logo are trademarks of the <a href="https://www.apache.org">Apache Software Foundation</a>.<br/>
All other marks mentioned may be trademarks or registered trademarks of their respective owners.</p>
        </div>
        <p id="poweredBy" class="pull-right"><a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
</p>
      </div>
    </footer>
  </body>
</html>
