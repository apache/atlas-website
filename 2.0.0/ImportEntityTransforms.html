<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8 from src/site/markdown/ImportEntityTransforms.md at 2019-06-27
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20190627" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Apache Atlas &#x2013; (New) Entity Transforms Framework</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarEnabled">
    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
            <div class="container" style="width: 68%;"><div class="nav-collapse">
            <ul class="nav">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Apache Atlas <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="index.html" title="Overview">Overview</a></li>
            <li><a href="license.html" title="License">License</a></li>
            <li><a href="../Downloads.html" title="Downloads">Downloads</a></li>
            <li><a href="https://cwiki.apache.org/confluence/display/ATLAS" title="Wiki">Wiki</a></li>
            <li><a href="https://gitbox.apache.org/repos/asf/atlas.git" title="Git">Git</a></li>
            <li><a href="https://issues.apache.org/jira/browse/ATLAS" title="Jira">Jira</a></li>
            <li><a href="https://reviews.apache.org/groups/atlas/?sort=-time_added" title="Review Board">Review Board</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Information <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="project-info.html" title="Summary">Summary</a></li>
            <li><a href="mail-lists.html" title="Mailing Lists">Mailing Lists</a></li>
            <li><a href="team-list.html" title="Team">Team</a></li>
            <li><a href="issue-tracking.html" title="Issue Tracking">Issue Tracking</a></li>
            <li><a href="source-repository.html" title="Source Repository">Source Repository</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Download <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../Downloads.html" target="_blank" title="Source Downloads">Source Downloads</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../index.html" title="latest">latest</a></li>
            <li><a href="../2.0.0/index.html" title="2.0.0">2.0.0</a></li>
            <li><a href="../1.1.0/index.html" title="1.1.0">1.1.0</a></li>
            <li><a href="../1.0.0/index.html" title="1.0.0">1.0.0</a></li>
            <li><a href="../0.8.3/index.html" title="0.8.3">0.8.3</a></li>
            <li><a href="../0.8.2/index.html" title="0.8.2">0.8.2</a></li>
            <li><a href="../0.8.1/index.html" title="0.8.1">0.8.1</a></li>
            <li><a href="../0.8.0-incubating/index.html" title="0.8-incubating">0.8-incubating</a></li>
            <li><a href="../0.7.1-incubating/index.html" title="0.7.1-incubating">0.7.1-incubating</a></li>
            <li><a href="../0.7.0-incubating/index.html" title="0.7-incubating">0.7-incubating</a></li>
            <li><a href="../0.6.0-incubating/index.html" title="0.6-incubating">0.6-incubating</a></li>
            <li><a href="../0.5.0-incubating/index.html" title="0.5-incubating">0.5-incubating</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">ASF <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="http://www.apache.org/foundation/how-it-works.html" title="How Apache Works">How Apache Works</a></li>
            <li><a href="https://www.apache.org/events/current-event" title="Events">Events</a></li>
            <li><a href="https://www.apache.org/licenses/" title="License">License</a></li>
            <li><a href="http://www.apache.org/foundation/" title="Foundation">Foundation</a></li>
            <li><a href="http://www.apache.org/foundation/sponsorship.html" title="Sponsoring Apache">Sponsoring Apache</a></li>
            <li><a href="http://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></li>
        </ul>
      </li>
            </ul>
<form id="search-form" action="https://www.google.com/search" method="get"  class="navbar-search pull-right" >
  <input value="http://atlas.apache.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript">asyncJs( 'https://cse.google.com/brand?form=search-form' )</script>
    <iframe src="https://www.facebook.com/plugins/like.php?href=http://atlas.apache.org/atlas-docs&send=false&layout=button_count&show-faces=false&action=like&colorscheme=dark"
        scrolling="no" frameborder="0"
        style="border:none; width:100px; height:20px; margin-top: 10px;"  class="pull-right" ></iframe>
    <script type="text/javascript">asyncJs( 'https://apis.google.com/js/plusone.js' )</script>
    <ul class="nav pull-right"><li style="margin-top: 10px;">
    <div class="g-plusone" data-href="http://atlas.apache.org/atlas-docs" data-size="medium"  width="60px" align="right" ></div>
    </li></ul>
            </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div id="banner">
        <div class="pull-left"><a href=".." id="bannerLeft"><img src="images/atlas-logo.png"  alt="Apache Atlas" width="200px" height="45px"/></a></div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
      <li class=""><a href="http://www.apache.org" class="externalLink" title="Apache">Apache</a><span class="divider">/</span></li>
      <li class=""><a href="index.html" title="Atlas">Atlas</a><span class="divider">/</span></li>
    <li class="active ">(New) Entity Transforms Framework</li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2019-06-27</li>
          <li id="projectVersion" class="pull-right">Version: 2.0.0</li>
        </ul>
      </div>
        <div id="bodyColumn" >
<h1>(New) Entity Transforms Framework</h1>
<div class="section">
<div class="section">
<div class="section">
<h4><a name="Background"></a>Background</h4>
<p>During Import Process, entity transforms are required to make changes to the entity before it gets committed to the database. These modifications are necessary to make the entity conform to the environment it is going to reside. The Import Process provided a mechanism to do that.</p></div>
<div class="section">
<h4><a name="Transformation_Framework"></a>Transformation Framework</h4>
<p>A transformation framework allows a mechanism to selectively transform an entity or specific attributes of that entity.</p>
<p>To achieve this, the framework, provides:</p>
<ul>

<li>Way to set a condition that needs to be satisfied for a transformation to be applied.</li>
<li>Action to be taken on the entity once the condition is met.</li>
</ul>
<p>The existing transformation frameworks allowed this to happen.</p></div>
<div class="section">
<h4><a name="Reason_for_New_Transformation_Framework"></a>Reason for New Transformation Framework</h4>
<p>While the existing framework provided the basic benefits of transformation framework, it did not have support for some of the commonly used Atlas types. Which meant that users of this framework would have to meticulously define transformations for every type they are working with. This can be tedious and potentially error prone. The new framework addresses this problem by providing built-in transformations for some of the commonly used types. It can also be extended to accommodate new types.</p></div>
<div class="section">
<h4><a name="Approach"></a>Approach</h4>
<p>The approach used by the new transformation framework creates a transformation by: * Specifying a condition. * Specifying action(s) to be taken if condition is met.</p>
<div class="section">
<h5><a name="Conditions"></a>Conditions</h5>
<p>Following are built-in conditions.</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th>Condition Types                          </th>
<th> Description     </th></tr>
</thead><tbody>

<tr class="b">
<td>ENTITY_ALL                </td>
<td> Any/every entity               </td></tr>
<tr class="a">
<td>ENTITY_TOP_LEVEL          </td>
<td> Entity that is the top-level entity. This is also the entity present specified in <i>AtlasExportRequest</i>.</td></tr>
<tr class="b">
<td>EQUALS                    </td>
<td> Entity attribute equals to the one specified in the condition. </td></tr>
<tr class="a">
<td>EQUALS_IGNORE_CASE        </td>
<td> Entity attribute equals to the one specified in the condition ignoring case. </td></tr>
<tr class="b">
<td>STARTS_WITH               </td>
<td> Entity attribute starts with. </td></tr>
<tr class="a">
<td>STARTS_WITH_IGNORE_CASE   </td>
<td> Entity attribute starts with ignoring case. </td></tr>
<tr class="b">
<td>HAS_VALUE                 </td>
<td> Entity attribute has value. </td></tr>
</tbody>
</table></div>
<div class="section">
<h5><a name="Actions"></a>Actions</h5>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th>Action Type        </th>
<th> Description                                  </th></tr>
</thead><tbody>

<tr class="b">
<td>ADD_CLASSIFICATION </td>
<td> Add classifiction                            </td></tr>
<tr class="a">
<td>REPLACE_PREFIX     </td>
<td> Replace value starting with another value.   </td></tr>
<tr class="b">
<td>TO_LOWER           </td>
<td> Convert value of an attribute to lower case. </td></tr>
<tr class="a">
<td>SET                </td>
<td> Set the value of an attribute                </td></tr>
<tr class="b">
<td>CLEAR              </td>
<td> Clear value of an attribute                  </td></tr>
</tbody>
</table></div></div>
<div class="section">
<h4><a name="Built-in_Transforms"></a>Built-in Transforms</h4>
<div class="section">
<div class="section">
<h6><a name="Add_Classification"></a>Add Classification</h6>
<p>During import, hive_db entity whose <i>qualifiedName</i> is <i>stocks@cl1</i> will get the classification <i>clSrcImported</i>.</p>

<div>
<div>
<pre class="source">{
    &quot;conditions&quot;: {
        &quot;hive_db.qualifiedName&quot;: &quot;stocks@cl1&quot;
    },
    &quot;action&quot;: {
        &quot;__entity&quot;: &quot;ADD_CLASSIFICATION: clSrcImported&quot;
    }
}
</pre></div></div>

<p>Every imported entity will get the classification by simply changing the condition. The __entity is special condition which matches entity.</p>

<div>
<div>
<pre class="source">{
    &quot;conditions&quot;: {
        &quot;__entity&quot;: &quot;&quot;
    },
    &quot;action&quot;: {
        &quot;__entity&quot;: &quot;ADD_CLASSIFICATION: clSrcImported&quot;
    }
}
</pre></div></div>

<p>To add classification to only the top-level entity (entity that is used as starting point for an export), use:</p>

<div>
<div>
<pre class="source">{
    &quot;conditions&quot;: {
        &quot;__entity&quot;: &quot;topLevel:&quot;
    },
    &quot;action&quot;: {
        &quot;__entity&quot;: &quot;ADD_CLASSIFICATION: clSrcImported&quot;
    }
}
</pre></div></div>
</div>
<div class="section">
<h6><a name="Replace_Prefix"></a>Replace Prefix</h6>
<p>This action works on string values. The first parameter is the prefix that is searched for a match, once matched, it is replaced with the provided replacement string.</p>
<p>The sample below searches for <i>/aa/bb/</i>, once found replaces it with <i>/xx/yy/</i>.</p>

<div>
<div>
<pre class="source">{
    &quot;conditions&quot;: {
        &quot;hdfs_path.clusterName&quot;: &quot;EQUALS: CL1&quot;
    },
    &quot;action&quot;: {
        &quot;hdfs_path.path&quot;: &quot;REPLACE_PREFIX: = :/aa/bb/=/xx/yy/&quot;
    }
}
</pre></div></div>
</div>
<div class="section">
<h6><a name="To_Lower"></a>To Lower</h6>
<p>Entity whose hdfs_path.clusterName is CL1 will get its path attribute converted to lower case.</p>

<div>
<div>
<pre class="source">{
    &quot;conditions&quot;: {
        &quot;hdfs_path.clusterName&quot;: &quot;EQUALS: CL1&quot;
    },
    &quot;action&quot;: {
        &quot;hdfs_path.path&quot;: &quot;TO_LOWER:&quot;
    }
}
</pre></div></div>
</div>
<div class="section">
<h6><a name="Clear"></a>Clear</h6>
<p>Entity whose hdfs_path.clusterName has value set, will get its <i>replicatedTo</i> attribute value cleared.</p>

<div>
<div>
<pre class="source">{
    &quot;conditions&quot;: {
        &quot;hdfs_path.clusterName&quot;: &quot;HAS_VALUE:&quot;
    },
    &quot;action&quot;: {
        &quot;hdfs_path.replicatedTo&quot;: &quot;CLEAR:&quot;
    }
}
</pre></div></div>
</div></div></div>
<div class="section">
<h4><a name="Additional_Examples"></a>Additional Examples</h4>
<p>Please look at <a class="externalLink" href="https://github.com/apache/atlas/blob/master/intg/src/test/java/org/apache/atlas/entitytransform/TransformationHandlerTest.java">these tests</a> for examples using Java classes.</p></div></div></div>
        </div>
    </div>
    <hr/>
    <footer>
      <div class="container">
        <div class="row">
<p><a href="https://www.apache.org/foundation/contributing"><img src="https://www.apache.org/images/SupportApache-small.png" alt="Support the ASF" id="asf-logo" height="20" width="20" /></a>Copyright © 2011-2018 The Apache Software Foundation. Licensed under the <a href="https://www.apache.org/licenses/">Apache License, Version 2.0</a>.<br/>
Apache Atlas, Atlas, Apache, the Apache feather logo are trademarks of the <a href="https://www.apache.org">Apache Software Foundation</a>.<br/>
All other marks mentioned may be trademarks or registered trademarks of their respective owners.</p>
        </div>
        <p id="poweredBy" class="pull-right"><a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
</p>
      </div>
    </footer>
  </body>
</html>
