<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8 from src/site/twiki/Export-API.twiki at 2019-06-27
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20190627" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Apache Atlas &#x2013; Export API</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarEnabled">
    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
            <div class="container" style="width: 68%;"><div class="nav-collapse">
            <ul class="nav">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Apache Atlas <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="index.html" title="Overview">Overview</a></li>
            <li><a href="license.html" title="License">License</a></li>
            <li><a href="../Downloads.html" title="Downloads">Downloads</a></li>
            <li><a href="https://cwiki.apache.org/confluence/display/ATLAS" title="Wiki">Wiki</a></li>
            <li><a href="https://gitbox.apache.org/repos/asf/atlas.git" title="Git">Git</a></li>
            <li><a href="https://issues.apache.org/jira/browse/ATLAS" title="Jira">Jira</a></li>
            <li><a href="https://reviews.apache.org/groups/atlas/?sort=-time_added" title="Review Board">Review Board</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Information <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="project-info.html" title="Summary">Summary</a></li>
            <li><a href="mail-lists.html" title="Mailing Lists">Mailing Lists</a></li>
            <li><a href="team-list.html" title="Team">Team</a></li>
            <li><a href="issue-tracking.html" title="Issue Tracking">Issue Tracking</a></li>
            <li><a href="source-repository.html" title="Source Repository">Source Repository</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Download <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../Downloads.html" target="_blank" title="Source Downloads">Source Downloads</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../index.html" title="latest">latest</a></li>
            <li><a href="../2.0.0/index.html" title="2.0.0">2.0.0</a></li>
            <li><a href="../1.1.0/index.html" title="1.1.0">1.1.0</a></li>
            <li><a href="../1.0.0/index.html" title="1.0.0">1.0.0</a></li>
            <li><a href="../0.8.3/index.html" title="0.8.3">0.8.3</a></li>
            <li><a href="../0.8.2/index.html" title="0.8.2">0.8.2</a></li>
            <li><a href="../0.8.1/index.html" title="0.8.1">0.8.1</a></li>
            <li><a href="../0.8.0-incubating/index.html" title="0.8-incubating">0.8-incubating</a></li>
            <li><a href="../0.7.1-incubating/index.html" title="0.7.1-incubating">0.7.1-incubating</a></li>
            <li><a href="../0.7.0-incubating/index.html" title="0.7-incubating">0.7-incubating</a></li>
            <li><a href="../0.6.0-incubating/index.html" title="0.6-incubating">0.6-incubating</a></li>
            <li><a href="../0.5.0-incubating/index.html" title="0.5-incubating">0.5-incubating</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">ASF <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="http://www.apache.org/foundation/how-it-works.html" title="How Apache Works">How Apache Works</a></li>
            <li><a href="https://www.apache.org/events/current-event" title="Events">Events</a></li>
            <li><a href="https://www.apache.org/licenses/" title="License">License</a></li>
            <li><a href="http://www.apache.org/foundation/" title="Foundation">Foundation</a></li>
            <li><a href="http://www.apache.org/foundation/sponsorship.html" title="Sponsoring Apache">Sponsoring Apache</a></li>
            <li><a href="http://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></li>
        </ul>
      </li>
            </ul>
<form id="search-form" action="https://www.google.com/search" method="get"  class="navbar-search pull-right" >
  <input value="http://atlas.apache.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript">asyncJs( 'https://cse.google.com/brand?form=search-form' )</script>
    <iframe src="https://www.facebook.com/plugins/like.php?href=http://atlas.apache.org/atlas-docs&send=false&layout=button_count&show-faces=false&action=like&colorscheme=dark"
        scrolling="no" frameborder="0"
        style="border:none; width:100px; height:20px; margin-top: 10px;"  class="pull-right" ></iframe>
    <script type="text/javascript">asyncJs( 'https://apis.google.com/js/plusone.js' )</script>
    <ul class="nav pull-right"><li style="margin-top: 10px;">
    <div class="g-plusone" data-href="http://atlas.apache.org/atlas-docs" data-size="medium"  width="60px" align="right" ></div>
    </li></ul>
            </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div id="banner">
        <div class="pull-left"><a href=".." id="bannerLeft"><img src="images/atlas-logo.png"  alt="Apache Atlas" width="200px" height="45px"/></a></div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
      <li class=""><a href="http://www.apache.org" class="externalLink" title="Apache">Apache</a><span class="divider">/</span></li>
      <li class=""><a href="index.html" title="Atlas">Atlas</a><span class="divider">/</span></li>
    <li class="active ">Export API</li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2019-06-27</li>
          <li id="projectVersion" class="pull-right">Version: 2.0.0</li>
        </ul>
      </div>
        <div id="bodyColumn" >
<div class="section">
<h2><a name="Export_API"></a>Export API</h2>
<p>The general approach is:</p>
<ul>
<li>Consumer specifies the scope of data to be exported (details below).</li>
<li>The API if successful, will return the stream in the format specified.</li>
<li>Error will be returned on failure of the call.</li></ul>
<p>See <a href="./Export-HDFS-API.html">here</a> for details on exporting <b>hdfs_path</b> entities.</p>
<p></p>
<table border="0" class="table table-striped">
<tr class="a">
<th>Title</th>
<th>Export API</th></tr>
<tr class="b">
<td><i>Example</i></td>
<td>See Examples sections below.</td></tr>
<tr class="a">
<td><i>URL</i></td>
<td><i>api/atlas/admin/export</i></td></tr>
<tr class="b">
<td><i>Method</i></td>
<td><i>POST</i></td></tr>
<tr class="a">
<td><i>URL Parameters</i></td>
<td><i>None</i></td></tr>
<tr class="b">
<td><i>Data Parameters</i></td>
<td>The class <i>AtlasExportRequest</i> is used to specify the items to export. The list of <i>AtlasObjectId</i>(s) allow for specifying the multiple items to export in a session. The <i>AtlasObjectId</i> is a tuple of entity type, name of unique attribute, value of unique attribute. Several items can be specified. See examples below.</td></tr>
<tr class="a">
<td><i>Success Response</i></td>
<td>File stream as <i>application/zip</i>.</td></tr>
<tr class="b">
<td><i>Error Response</i></td>
<td>Errors that are handled within the system will be returned as <i>AtlasBaseException</i>.</td></tr>
<tr class="a">
<td><i>Notes</i></td>
<td>Consumer could choose to consume the output of the API by programmatically using <i>java.io.ByteOutputStream</i> or by manually, save the contents of the stream to a file on the disk.</td></tr></table><b><i>Method Signature</i></b>
<div class="source"><pre class="prettyprint">
@POST
@Path(&quot;/export&quot;)
@Consumes(&quot;application/json;charset=UTF-8&quot;)

</pre></div></div>
<div class="section">
<h4><a name="Additional_Options"></a>Additional Options</h4>
<p>It is possible to specify additional parameters for the <i>Export</i> operation.</p>
<p>Current implementation has 2 options. Both are optional:</p>
<ul>
<li><i>matchType</i> This option configures the approach used for fetching the starting entity. It has follow values:
<ul>
<li><i>startsWith</i> Search for an entity that is prefixed with the specified criteria.</li>
<li><i>endsWith</i> Search for an entity that is suffixed with the specified criteria.</li>
<li><i>contains</i> Search for an entity that has the specified criteria as a sub-string.</li>
<li><i>matches</i> Search for an entity that is a regular expression match with the specified criteria.</li></ul></li></ul>
<p></p>
<ul>
<li><i>fetchType</i> This option configures the approach used for fetching entities. It has following values:
<ul>
<li><i>FULL</i>: This fetches all the entities that are connected directly and indirectly to the starting entity. E.g. If a starting entity specified is a table, then this option will fetch the table, database and all the other tables within the database.</li>
<li><i>CONNECTED</i>: This fetches all the etnties that are connected directly to the starting entity. E.g. If a starting entity specified is a table, then this option will fetch the table and the database entity only.</li>
<li><i>INCREMENTAL</i>: See <a href="./Incremental-Export.html">here</a> for details.</li></ul></li></ul>
<p>If no <i>matchType</i> is specified, exact match is used. Which means, that the entire string is used in the search criteria.</p>
<p>Searching using <i>matchType</i> applies for all types of entities. It is particularly useful for matching entities of type hdfs_path (see <a href="./Export-HDFS-API.html">here</a>).</p>
<p>The <i>fetchType</i> option defaults to <i>FULL</i>.</p>
<p>For complete example see section below.</p></div>
<div class="section">
<h4><a name="Contents_of_Exported_ZIP_File"></a>Contents of Exported ZIP File</h4>
<p>The exported ZIP file has the following entries within it:</p>
<ul>
<li><i>atlas-export-result.json</i>:
<ul>
<li>Input filters: The scope of export.</li>
<li>File format: The format chosen for the export operation.</li>
<li>Metrics: The number of entity definitions, classifications and entities exported.</li></ul></li>
<li><i>atlas-typesdef.json</i>: Type definitions for the entities exported.</li>
<li><i>atlas-export-order.json</i>: Order in which entities should be exported.</li>
<li><i>{guid}.json</i>: Individual entities are exported with file names that correspond to their id.</li></ul></div>
<div class="section">
<h4><a name="Examples"></a>Examples</h4>
<p>The <i>AtlasExportRequest</i> below shows filters that attempt to export 2 databases in cluster cl1:</p>
<div class="source"><pre class="prettyprint">
{
    &quot;itemsToExport&quot;: [
       { &quot;typeName&quot;: &quot;hive_db&quot;, &quot;uniqueAttributes&quot;: { &quot;qualifiedName&quot;: &quot;accounts@cl1&quot; } },
       { &quot;typeName&quot;: &quot;hive_db&quot;, &quot;uniqueAttributes&quot;: { &quot;qualifiedName&quot;: &quot;hr@cl1&quot; } }
    ]
}

</pre></div>
<p>The <i>AtlasExportRequest</i> below specifies the <i>fetchType</i> as <i>FULL</i>. The <i>matchType</i> option will fetch <i>accounts@cl1</i>.</p>
<div class="source"><pre class="prettyprint">
{
    &quot;itemsToExport&quot;: [
       { &quot;typeName&quot;: &quot;hive_db&quot;, &quot;uniqueAttributes&quot;: { &quot;qualifiedName&quot;: &quot;accounts@&quot; } },
    ],
    &quot;options&quot; {
        &quot;fetchType&quot;: &quot;FULL&quot;,
        &quot;matchType&quot;: &quot;startsWith&quot;
    }
}

</pre></div>
<p>The <i>AtlasExportRequest</i> below specifies the <i>fetchType</i> as <i>connected</i>. The <i>matchType</i> option will fetch <i>accountsReceivable</i>, <i>accountsPayable</i>, etc present in the database.</p>
<div class="source"><pre class="prettyprint">
{
    &quot;itemsToExport&quot;: [
       { &quot;typeName&quot;: &quot;hive_db&quot;, &quot;uniqueAttributes&quot;: { &quot;name&quot;: &quot;accounts&quot; } },
    ],
    &quot;options&quot; {
        &quot;fetchType&quot;: &quot;CONNECTED&quot;,
        &quot;matchType&quot;: &quot;startsWith&quot;
    }
}

</pre></div>
<p>Below is the <i>AtlasExportResult</i> JSON for the export of the <i>Sales</i> DB present in the <i>QuickStart</i>.</p>
<p>The <i>metrics</i> contains the number of types and entities exported as part of the operation.</p>
<div class="source"><pre class="prettyprint">
{
    &quot;clientIpAddress&quot;: &quot;10.0.2.15&quot;,
    &quot;hostName&quot;: &quot;10.0.2.2&quot;,
    &quot;metrics&quot;: {
        &quot;duration&quot;: 1415,
        &quot;entitiesWithExtInfo&quot;: 12,
        &quot;entity:DB_v1&quot;: 2,
        &quot;entity:LoadProcess_v1&quot;: 2,
        &quot;entity:Table_v1&quot;: 6,
        &quot;entity:View_v1&quot;: 2,
        &quot;typedef:Column_v1&quot;: 1,
        &quot;typedef:DB_v1&quot;: 1,
        &quot;typedef:LoadProcess_v1&quot;: 1,
        &quot;typedef:StorageDesc_v1&quot;: 1,
        &quot;typedef:Table_v1&quot;: 1,
        &quot;typedef:View_v1&quot;: 1,
        &quot;typedef:classification&quot;: 6
    },
    &quot;operationStatus&quot;: &quot;SUCCESS&quot;,
    &quot;request&quot;: {
        &quot;itemsToExport&quot;: [
            {
                &quot;typeName&quot;: &quot;DB_v1&quot;,
                &quot;uniqueAttributes&quot;: {
                    &quot;name&quot;: &quot;Sales&quot;
                }
            }
        ],
        &quot;options&quot;: {
            &quot;fetchType&quot;: &quot;full&quot;
        }
    },
    &quot;userName&quot;: &quot;admin&quot;
}

</pre></div></div>
<div class="section">
<h4><a name="CURL_Calls"></a>CURL Calls</h4>
<p>Below are sample CURL calls that demonstrate Export of <i>QuickStart</i> database.</p>
<div class="source"><pre class="prettyprint">
curl -X POST -u adminuser:password -H &quot;Content-Type: application/json&quot; -H &quot;Cache-Control: no-cache&quot; -d '{
    &quot;itemsToExport&quot;: [
            { &quot;typeName&quot;: &quot;DB&quot;, &quot;uniqueAttributes&quot;: { &quot;name&quot;: &quot;Sales&quot; }
            { &quot;typeName&quot;: &quot;DB&quot;, &quot;uniqueAttributes&quot;: { &quot;name&quot;: &quot;Reporting&quot; }
            { &quot;typeName&quot;: &quot;DB&quot;, &quot;uniqueAttributes&quot;: { &quot;name&quot;: &quot;Logging&quot; }
        }
    ],
        &quot;options&quot;: { &quot;full&quot; }
    }' &quot;http://localhost:21000/api/atlas/admin/export&quot; &gt; quickStartDB.zip

</pre></div></div>
        </div>
    </div>
    <hr/>
    <footer>
      <div class="container">
        <div class="row">
<p><a href="https://www.apache.org/foundation/contributing"><img src="https://www.apache.org/images/SupportApache-small.png" alt="Support the ASF" id="asf-logo" height="20" width="20" /></a>Copyright © 2011-2018 The Apache Software Foundation. Licensed under the <a href="https://www.apache.org/licenses/">Apache License, Version 2.0</a>.<br/>
Apache Atlas, Atlas, Apache, the Apache feather logo are trademarks of the <a href="https://www.apache.org">Apache Software Foundation</a>.<br/>
All other marks mentioned may be trademarks or registered trademarks of their respective owners.</p>
        </div>
        <p id="poweredBy" class="pull-right"><a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
</p>
      </div>
    </footer>
  </body>
</html>
